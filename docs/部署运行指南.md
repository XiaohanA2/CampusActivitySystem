# æ ¡å›­æ´»åŠ¨ç®¡ç†ç³»ç»Ÿ - éƒ¨ç½²è¿è¡ŒæŒ‡å—

## ğŸ“‹ éƒ¨ç½²æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜æ ¡å›­æ´»åŠ¨ç®¡ç†ç³»ç»Ÿçš„éƒ¨ç½²å’Œè¿è¡Œæµç¨‹ï¼ŒåŒ…æ‹¬ç¯å¢ƒå‡†å¤‡ã€ç³»ç»Ÿå®‰è£…ã€é…ç½®ç®¡ç†å’Œè¿è¡Œç»´æŠ¤ã€‚æœ¬æŒ‡å—é€‚ç”¨äºWindowsç¯å¢ƒä¸‹çš„éƒ¨ç½²ï¼Œä¸ºè€å¸ˆæ ¸æŸ¥é¡¹ç›®æä¾›å®Œæ•´çš„éƒ¨ç½²è¯´æ˜ã€‚

## ğŸ› ï¸ ç¯å¢ƒå‡†å¤‡

### ç³»ç»Ÿè¦æ±‚

#### ç¡¬ä»¶è¦æ±‚
- **CPU**: åŒæ ¸ 2.0GHz æˆ–æ›´é«˜
- **å†…å­˜**: 4GB RAM æˆ–æ›´é«˜
- **å­˜å‚¨**: 10GB å¯ç”¨ç£ç›˜ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„ç½‘ç»œè¿æ¥

#### è½¯ä»¶è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11 æˆ– Windows Server 2019+
- **.NET 8 SDK**: å¿…éœ€
- **Visual Studio 2022**: ç”¨äºC++ç¼–è¯‘
- **MySQL 8.0+**: æ•°æ®åº“æœåŠ¡å™¨
- **Redis 6.0+**: ç¼“å­˜æœåŠ¡å™¨
- **PowerShell**: è„šæœ¬æ‰§è¡Œç¯å¢ƒ

### è½¯ä»¶å®‰è£…

#### 1. å®‰è£… .NET 8 SDK
```powershell
# ä¸‹è½½å¹¶å®‰è£… .NET 8 SDK
# è®¿é—®: https://dotnet.microsoft.com/download/dotnet/8.0
# ä¸‹è½½ Windows x64 å®‰è£…åŒ…å¹¶è¿è¡Œ

# éªŒè¯å®‰è£…
dotnet --version
```

#### 2. å®‰è£… Visual Studio 2022
```powershell
# ä¸‹è½½ Visual Studio 2022 Community/Professional/Enterprise
# è®¿é—®: https://visualstudio.microsoft.com/
# ç¡®ä¿å®‰è£…ä»¥ä¸‹å·¥ä½œè´Ÿè½½:
# - .NET æ¡Œé¢å¼€å‘
# - ASP.NET å’Œ Web å¼€å‘
# - ä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘
```

#### 3. å®‰è£… MySQL 8.0
```powershell
# ä¸‹è½½ MySQL 8.0 Community Server
# è®¿é—®: https://dev.mysql.com/downloads/mysql/
# é€‰æ‹© Windows (x86, 64-bit) MSI Installer

# å®‰è£…æ—¶è®¾ç½®:
# - Rootå¯†ç : è¯·è®°ä½æ­¤å¯†ç 
# - ç«¯å£: 3306 (é»˜è®¤)
# - å­—ç¬¦é›†: utf8mb4
```

#### 4. å®‰è£… Redis
```powershell
# æ–¹æ³•1: ä½¿ç”¨ Windows Subsystem for Linux (WSL)
wsl --install
wsl
sudo apt update
sudo apt install redis-server
sudo systemctl start redis-server

# æ–¹æ³•2: ä½¿ç”¨ Docker
docker run --name redis -p 6379:6379 -d redis:6.0

# æ–¹æ³•3: ä½¿ç”¨ Windows ç‰ˆæœ¬ (æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ)
# ä¸‹è½½: https://github.com/microsoftarchive/redis/releases
```

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®

### 1. åˆ›å»ºæ•°æ®åº“
```sql
-- è¿æ¥åˆ° MySQL
mysql -u root -p

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE CampusActivityDB 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

-- åˆ›å»ºä¸“ç”¨ç”¨æˆ· (å¯é€‰ï¼Œæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ)
CREATE USER 'campus_user'@'localhost' IDENTIFIED BY 'your_secure_password';
GRANT ALL PRIVILEGES ON CampusActivityDB.* TO 'campus_user'@'localhost';
FLUSH PRIVILEGES;

-- éªŒè¯æ•°æ®åº“åˆ›å»º
SHOW DATABASES;
USE CampusActivityDB;
SHOW TABLES;
```

### 2. æ•°æ®åº“åˆå§‹åŒ–
```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd CampusActivitySystem

# æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
mysql -u root -p < database/init.sql

# æˆ–è€…ä½¿ç”¨ Entity Framework è¿ç§»
cd src/CampusActivity.WebAPI
dotnet ef database update
```

## âš™ï¸ ç³»ç»Ÿé…ç½®

### 1. é…ç½®æ–‡ä»¶è®¾ç½®

ç¼–è¾‘ `src/CampusActivity.WebAPI/appsettings.json`:

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Port=3306;Database=CampusActivityDB;User=root;Password=your_mysql_password;CharSet=utf8mb4;",
    "Redis": "localhost:6379"
  },
  "JwtSettings": {
    "SecretKey": "CampusActivitySystemSecretKey2024ForJWTTokenGeneration",
    "Issuer": "CampusActivitySystem",
    "Audience": "CampusActivityUsers",
    "ExpirationHours": 24
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
```

### 2. ç¯å¢ƒå˜é‡é…ç½®

#### å¼€å‘ç¯å¢ƒ
```powershell
# è®¾ç½®ç¯å¢ƒå˜é‡
$env:ASPNETCORE_ENVIRONMENT = "Development"
$env:ASPNETCORE_URLS = "https://localhost:7000"
```

#### ç”Ÿäº§ç¯å¢ƒ
```powershell
# è®¾ç½®ç¯å¢ƒå˜é‡
$env:ASPNETCORE_ENVIRONMENT = "Production"
$env:ASPNETCORE_URLS = "https://localhost:7000"
```

## ğŸš€ ç³»ç»Ÿéƒ¨ç½²

### 1. æ„å»ºé¡¹ç›®
```powershell
# è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
cd CampusActivitySystem

# è¿è¡Œæ„å»ºè„šæœ¬
.\build.ps1

# éªŒè¯æ„å»ºç»“æœ
dotnet build CampusActivitySystem.sln --configuration Release
```

### 2. å‘å¸ƒåº”ç”¨

#### å‘å¸ƒ Web API
```powershell
# è¿›å…¥ WebAPI é¡¹ç›®ç›®å½•
cd src/CampusActivity.WebAPI

# å‘å¸ƒåº”ç”¨
dotnet publish -c Release -o ./publish

# æˆ–è€…å‘å¸ƒä¸ºè‡ªåŒ…å«åº”ç”¨
dotnet publish -c Release -r win-x64 --self-contained true -o ./publish
```

#### å‘å¸ƒ Blazor å‰ç«¯
```powershell
# è¿›å…¥ Blazor é¡¹ç›®ç›®å½•
cd src/CampusActivity.BlazorWeb

# å‘å¸ƒåº”ç”¨
dotnet publish -c Release -o ./publish
```

### 3. éƒ¨ç½²åˆ°æœåŠ¡å™¨

#### æ–¹æ³•ä¸€ï¼šç›´æ¥è¿è¡Œ
```powershell
# å¯åŠ¨ Web API
cd src/CampusActivity.WebAPI
dotnet run --urls "https://localhost:7000" --environment Production

# å¯åŠ¨ Blazor å‰ç«¯
cd src/CampusActivity.BlazorWeb
dotnet run --urls "https://localhost:7001" --environment Production
```

#### æ–¹æ³•äºŒï¼šä½¿ç”¨ Windows æœåŠ¡
```powershell
# å®‰è£… Windows æœåŠ¡
sc create "CampusActivityAPI" binPath="C:\path\to\CampusActivity.WebAPI.exe"
sc start "CampusActivityAPI"

sc create "CampusActivityBlazor" binPath="C:\path\to\CampusActivity.BlazorWeb.exe"
sc start "CampusActivityBlazor"
```

#### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ IIS
```powershell
# é…ç½® IIS åº”ç”¨ç¨‹åºæ± 
# å°†å‘å¸ƒç›®å½•é…ç½®ä¸º IIS ç½‘ç«™
# è®¾ç½®åº”ç”¨ç¨‹åºæ± ä¸º .NET Core
```

## âœ… ç³»ç»ŸéªŒè¯

### 1. æœåŠ¡çŠ¶æ€æ£€æŸ¥
```powershell
# æ£€æŸ¥ Web API çŠ¶æ€
curl -k https://localhost:7000/health

# æ£€æŸ¥ Blazor å‰ç«¯çŠ¶æ€
curl -k https://localhost:7001

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
mysql -u root -p -e "SELECT 1;"

# æ£€æŸ¥ Redis è¿æ¥
redis-cli ping
```

### 2. API åŠŸèƒ½æµ‹è¯•

#### è®¿é—® Swagger æ–‡æ¡£
- æ‰“å¼€æµè§ˆå™¨è®¿é—®: https://localhost:7000/swagger
- éªŒè¯ API æ–‡æ¡£æ˜¯å¦æ­£å¸¸æ˜¾ç¤º

#### æµ‹è¯•ç”¨æˆ·æ³¨å†Œ
```powershell
# æ³¨å†Œæ–°ç”¨æˆ·
curl -X POST "https://localhost:7000/api/auth/register" `
  -H "Content-Type: application/json" `
  -d '{
    "username": "testuser",
    "password": "Test123!",
    "email": "test@example.com",
    "role": "Student"
  }'
```

#### æµ‹è¯•ç”¨æˆ·ç™»å½•
```powershell
# ç”¨æˆ·ç™»å½•
curl -X POST "https://localhost:7000/api/auth/login" `
  -H "Content-Type: application/json" `
  -d '{
    "username": "admin",
    "password": "admin123"
  }'
```

### 3. å‰ç«¯åŠŸèƒ½æµ‹è¯•

#### è®¿é—®å‰ç«¯ç•Œé¢
- æ‰“å¼€æµè§ˆå™¨è®¿é—®: https://localhost:xxxx
- éªŒè¯é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½

#### æµ‹è¯•ç”¨æˆ·ç™»å½•
1. ç‚¹å‡»"ç™»å½•"æŒ‰é’®
2. ä½¿ç”¨é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·: admin / admin123
3. éªŒè¯ç™»å½•æˆåŠŸå¹¶è·³è½¬åˆ°ä¸»é¡µ

#### æµ‹è¯•æ´»åŠ¨ç®¡ç†
1. ç™»å½•åç‚¹å‡»"æ´»åŠ¨ç®¡ç†"
2. åˆ›å»ºæ–°æ´»åŠ¨
3. éªŒè¯æ´»åŠ¨åˆ—è¡¨æ˜¾ç¤º

## ğŸ”§ ç³»ç»Ÿç»´æŠ¤

### 1. æ—¥å¿—ç®¡ç†

#### æŸ¥çœ‹åº”ç”¨æ—¥å¿—
```powershell
# æŸ¥çœ‹ Web API æ—¥å¿—
Get-Content "logs/webapi.log" -Tail 100

# æŸ¥çœ‹ Blazor æ—¥å¿—
Get-Content "logs/blazor.log" -Tail 100
```

#### æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
```powershell
# æŸ¥çœ‹ Windows äº‹ä»¶æ—¥å¿—
Get-EventLog -LogName Application -Source "CampusActivity" -Newest 50

# æŸ¥çœ‹ MySQL æ—¥å¿—
Get-Content "C:\ProgramData\MySQL\MySQL Server 8.0\Data\mysql-error.log" -Tail 100
```

### 2. æ€§èƒ½ç›‘æ§

#### ç³»ç»Ÿèµ„æºç›‘æ§
```powershell
# æŸ¥çœ‹ CPU å’Œå†…å­˜ä½¿ç”¨æƒ…å†µ
Get-Counter "\Processor(_Total)\% Processor Time"
Get-Counter "\Memory\Available MBytes"

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
Get-WmiObject -Class Win32_LogicalDisk | Select-Object DeviceID, Size, FreeSpace
```

#### æ•°æ®åº“æ€§èƒ½ç›‘æ§
```sql
-- æŸ¥çœ‹æ•°æ®åº“è¿æ¥æ•°
SHOW STATUS LIKE 'Threads_connected';

-- æŸ¥çœ‹æ…¢æŸ¥è¯¢
SELECT * FROM mysql.slow_log ORDER BY start_time DESC LIMIT 10;

-- æŸ¥çœ‹è¡¨å¤§å°
SELECT 
    table_name,
    ROUND(((data_length + index_length) / 1024 / 1024), 2) AS 'Size (MB)'
FROM information_schema.tables 
WHERE table_schema = 'CampusActivityDB'
ORDER BY (data_length + index_length) DESC;
```

### 3. å¤‡ä»½å’Œæ¢å¤

#### æ•°æ®åº“å¤‡ä»½
```powershell
# åˆ›å»ºå¤‡ä»½è„šæœ¬
$backupPath = "C:\Backups\CampusActivityDB"
$date = Get-Date -Format "yyyy-MM-dd_HH-mm-ss"
$backupFile = "$backupPath\CampusActivityDB_$date.sql"

# åˆ›å»ºå¤‡ä»½ç›®å½•
if (!(Test-Path $backupPath)) {
    New-Item -ItemType Directory -Path $backupPath
}

# æ‰§è¡Œå¤‡ä»½
mysqldump -u root -p CampusActivityDB > $backupFile

Write-Host "æ•°æ®åº“å¤‡ä»½å®Œæˆ: $backupFile"
```

#### åº”ç”¨å¤‡ä»½
```powershell
# å¤‡ä»½åº”ç”¨æ–‡ä»¶
$appBackupPath = "C:\Backups\Applications"
$date = Get-Date -Format "yyyy-MM-dd_HH-mm-ss"
$appBackupDir = "$appBackupPath\CampusActivity_$date"

# åˆ›å»ºå¤‡ä»½ç›®å½•
New-Item -ItemType Directory -Path $appBackupDir -Force

# å¤åˆ¶åº”ç”¨æ–‡ä»¶
Copy-Item -Path "src\CampusActivity.WebAPI\publish\*" -Destination "$appBackupDir\WebAPI\" -Recurse
Copy-Item -Path "src\CampusActivity.BlazorWeb\publish\*" -Destination "$appBackupDir\BlazorWeb\" -Recurse

Write-Host "åº”ç”¨å¤‡ä»½å®Œæˆ: $appBackupDir"
```

## ğŸ”§ å®‰å…¨é…ç½®

### 1. ç½‘ç»œå®‰å…¨

#### é˜²ç«å¢™é…ç½®
```powershell
# å¼€æ”¾å¿…è¦ç«¯å£
New-NetFirewallRule -DisplayName "CampusActivity Web API" -Direction Inbound -Protocol TCP -LocalPort 7000 -Action Allow
New-NetFirewallRule -DisplayName "CampusActivity Blazor Web" -Direction Inbound -Protocol TCP -LocalPort 7001 -Action Allow
New-NetFirewallRule -DisplayName "MySQL Database" -Direction Inbound -Protocol TCP -LocalPort 3306 -Action Allow
New-NetFirewallRule -DisplayName "Redis Cache" -Direction Inbound -Protocol TCP -LocalPort 6379 -Action Allow
```

#### SSL è¯ä¹¦é…ç½®
```powershell
# ç”Ÿæˆå¼€å‘è¯ä¹¦
dotnet dev-certs https --trust

# ç”Ÿäº§ç¯å¢ƒä½¿ç”¨æ­£å¼SSLè¯ä¹¦
# é…ç½®åœ¨ appsettings.Production.json ä¸­
```

### 2. åº”ç”¨å®‰å…¨

#### JWT é…ç½®
```json
{
  "JwtSettings": {
    "SecretKey": "ä½¿ç”¨å¼ºå¯†ç ç”Ÿæˆå™¨ç”Ÿæˆçš„é•¿å¯†é’¥",
    "ExpirationHours": 8,
    "Issuer": "CampusActivitySystem",
    "Audience": "CampusActivityUsers"
  }
}
```

#### æ•°æ®åº“å®‰å…¨
```sql
-- åˆ›å»ºä¸“ç”¨åº”ç”¨ç”¨æˆ·
CREATE USER 'app_user'@'localhost' IDENTIFIED BY 'strong_password';
GRANT SELECT, INSERT, UPDATE, DELETE ON CampusActivityDB.* TO 'app_user'@'localhost';

-- åˆ é™¤åŒ¿åç”¨æˆ·
DELETE FROM mysql.user WHERE User='';

-- åˆ·æ–°æƒé™
FLUSH PRIVILEGES;
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–

```sql
-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_activities_status ON Activities(Status);
CREATE INDEX idx_activities_starttime ON Activities(StartTime);
CREATE INDEX idx_registrations_userid ON ActivityRegistrations(UserId);

-- ä¼˜åŒ–æŸ¥è¯¢
EXPLAIN SELECT * FROM Activities WHERE Status = 'Published';
```

### 2. ç¼“å­˜é…ç½®

```json
{
  "Redis": {
    "ConnectionString": "localhost:6379",
    "InstanceName": "CampusActivity:",
    "DefaultDatabase": 0
  }
}
```

### 3. åº”ç”¨é…ç½®

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning"
    }
  },
  "Kestrel": {
    "Limits": {
      "MaxConcurrentConnections": 100,
      "MaxConcurrentUpgradedConnections": 100
    }
  }
}
```

## ğŸ”’ å®‰å…¨é…ç½®

### 1. ç”Ÿäº§ç¯å¢ƒå®‰å…¨è®¾ç½®

```json
{
  "JwtSettings": {
    "SecretKey": "ä½¿ç”¨å¼ºå¯†ç ç”Ÿæˆå™¨ç”Ÿæˆçš„é•¿å¯†é’¥",
    "ExpirationHours": 8
  },
  "ConnectionStrings": {
    "DefaultConnection": "ä½¿ç”¨ä¸“ç”¨æ•°æ®åº“ç”¨æˆ·",
    "Redis": "é…ç½®Rediså¯†ç "
  }
}
```

### 2. HTTPS é…ç½®

```powershell
# ç”Ÿæˆå¼€å‘è¯ä¹¦
dotnet dev-certs https --trust

# ç”Ÿäº§ç¯å¢ƒä½¿ç”¨æ­£å¼SSLè¯ä¹¦
# é…ç½®åœ¨ appsettings.Production.json ä¸­
```
