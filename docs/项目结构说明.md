# 校园活动系统 - 项目结构说明

## 项目架构总览

本项目严格按照老师要求设计，包含以下关键特性：

### ✅ 满足的技术要求

1. **至少5个程序集** - ✅ 实际创建了8个程序集
2. **C++/CLI程序集** - ✅ CampusActivity.NativeLib
3. **C++ DLL模块** - ✅ CampusActivity.Core
4. **Blazor Web UI** - ✅ CampusActivity.BlazorWeb
5. **平台侧代码** - ✅ 完整的后端API和数据库

## 程序集详细说明

### 1. CampusActivity.Domain (领域层)
```
📁 Entities/
  ├── BaseEntity.cs          # 基础实体类
  ├── User.cs                # 用户实体
  ├── Activity.cs            # 活动实体
  ├── ActivityCategory.cs    # 活动分类实体
  ├── ActivityRegistration.cs # 活动报名实体
  ├── ActivityTag.cs         # 活动标签实体
  ├── ActivityRecommendation.cs # 推荐记录实体
  └── UserActivityPreference.cs # 用户偏好实体
```

### 2. CampusActivity.Infrastructure (基础设施层)
```
📁 Data/
  └── ApplicationDbContext.cs # EF Core数据库上下文
📁 Repositories/
  ├── IRepository.cs         # 通用仓储接口
  └── Repository.cs          # 通用仓储实现
📁 UnitOfWork/
  ├── IUnitOfWork.cs         # 工作单元接口
  └── UnitOfWork.cs          # 工作单元实现
```

### 3. CampusActivity.Application (应用层)
```
📁 Services/
  ├── IUserService.cs        # 用户服务接口
  ├── UserService.cs         # 用户服务实现
  ├── IActivityService.cs    # 活动服务接口
  ├── ActivityService.cs     # 活动服务实现
  └── IRecommendationService.cs # 推荐服务接口
📁 Mappings/
  └── AutoMapperProfile.cs   # AutoMapper配置
📁 Validators/
  ├── UserValidator.cs       # 用户数据验证
  └── ActivityValidator.cs   # 活动数据验证
```

### 4. CampusActivity.WebAPI (Web API层)
```
📁 Controllers/
  ├── AuthController.cs      # 认证控制器
  ├── UsersController.cs     # 用户管理控制器
  ├── ActivitiesController.cs # 活动管理控制器
  └── RecommendationsController.cs # 推荐控制器
📁 Middleware/
  ├── ExceptionMiddleware.cs # 异常处理中间件
  └── JwtMiddleware.cs       # JWT中间件
📁 Configuration/
  └── ServiceExtensions.cs   # 服务配置扩展
```

### 5. CampusActivity.BlazorWeb (Blazor前端)
```
📁 Pages/
  ├── Login.razor           # 登录页面
  ├── Activities.razor      # 活动列表页面
  ├── ActivityDetail.razor  # 活动详情页面
  ├── MyActivities.razor    # 我的活动页面
  └── Recommendations.razor # 推荐页面
📁 Components/
  ├── ActivityCard.razor    # 活动卡片组件
  ├── UserProfile.razor     # 用户资料组件
  └── NavigationMenu.razor  # 导航菜单组件
📁 Services/
  ├── ApiService.cs         # API调用服务
  └── AuthService.cs        # 认证服务
```

### 6. CampusActivity.Shared (共享库)
```
📁 DTOs/
  ├── UserDto.cs            # 用户数据传输对象
  ├── ActivityDto.cs        # 活动数据传输对象
  └── AuthDto.cs            # 认证数据传输对象
📁 Constants/
  └── AppConstants.cs       # 应用常量
📁 Enums/
  ├── UserRole.cs           # 用户角色枚举
  ├── ActivityStatus.cs     # 活动状态枚举
  └── RegistrationStatus.cs # 报名状态枚举
```

### 7. CampusActivity.NativeLib (C++/CLI程序集) ⭐
```
📁 RecommendationEngine.h   # 推荐引擎头文件
📁 RecommendationEngine.cpp # 推荐引擎实现
📁 CampusActivity.NativeLib.vcxproj # C++/CLI项目文件
```
**功能特性：**
- 智能推荐算法实现
- 协同过滤算法
- 基于内容的推荐
- 与C#代码无缝集成

### 8. CampusActivity.Core (C++ DLL) ⭐
```
📁 include/
  ├── CampusActivityCore.h  # 主头文件
  ├── ActivityAnalyzer.h    # 活动分析器头文件
  ├── DataProcessor.h       # 数据处理器头文件
  └── StringUtils.h         # 字符串工具头文件
📁 src/
  ├── ActivityAnalyzer.cpp  # 活动分析器实现
  ├── DataProcessor.cpp     # 数据处理器实现
  └── StringUtils.cpp       # 字符串工具实现
📁 CMakeLists.txt           # CMake构建配置
```
**功能特性：**
- 活动数据分析
- 文本关键词提取
- 统计计算功能
- 跨平台DLL支持

## 技术栈详细说明

### 后端技术栈
- **.NET 8.0** - 最新.NET框架
- **ASP.NET Core Web API** - RESTful API服务
- **Entity Framework Core 8.0** - ORM框架
- **MySQL** - 关系型数据库
- **Redis** - 内存缓存数据库
- **JWT Bearer** - 身份验证
- **AutoMapper** - 对象映射
- **FluentValidation** - 数据验证
- **BCrypt.Net** - 密码加密

### 前端技术栈
- **Blazor Server** - 服务端渲染Web UI
- **Bootstrap 5** - 响应式UI框架
- **SignalR** - 实时通信（可选）

### 数据库设计
- **MySQL 8.0+** - 主数据库
- **Redis 6.0+** - 缓存数据库
- **Entity Framework Migrations** - 数据库迁移

### 原生代码集成
- **C++/CLI** - 托管C++，用于推荐算法
- **C++ Standard Library** - 原生C++，用于数据分析
- **CMake** - C++项目构建工具

## 核心业务功能

### 用户管理系统
- 🔐 多角色认证（学生/教师/管理员）
- 👤 用户注册与登录
- 🛡️ JWT权限控制
- 📝 个人信息管理

### 活动管理系统
- 📅 活动发布与编辑
- 🏷️ 活动分类管理
- 📊 活动状态跟踪
- 🖼️ 活动图片上传

### 报名系统
- ✅ 在线活动报名
- ❌ 报名取消功能
- 📈 参与人数统计
- ⏰ 报名截止控制

### 智能推荐系统 (C++/CLI实现)
- 🤖 基于用户偏好推荐
- 👥 协同过滤算法
- 📊 活动热度分析
- 🎯 个性化推荐

### 数据分析系统 (C++ DLL实现)
- 📈 活动参与度分析
- 🔍 关键词提取
- 📊 趋势预测
- 📋 统计报表

## 部署架构

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Blazor Web    │    │   Web API       │    │   MySQL DB      │
│   (前端UI)       │◄──►│   (后端服务)     │◄──►│   (主数据库)     │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                              │                         │
                              ▼                         ▼
                       ┌─────────────────┐    ┌─────────────────┐
                       │   Redis Cache   │    │   C++/CLI DLL   │
                       │   (缓存服务)     │    │   (推荐引擎)     │
                       └─────────────────┘    └─────────────────┘
                                                       │
                                                       ▼
                                              ┌─────────────────┐
                                              │   C++ Core DLL  │
                                              │   (数据分析)     │
                                              └─────────────────┘
```

## 开发环境要求

### 必需软件
- **Visual Studio 2022** (含C++工具)
- **.NET 9.0 SDK**
- **MySQL 8.0+**
- **Redis 6.0+**
- **CMake 3.16+**

### 可选工具
- **MySQL Workbench** - 数据库管理
- **Redis Desktop Manager** - Redis管理
- **Postman** - API测试

## 项目亮点

1. **完整的分层架构** - 严格遵循DDD设计原则
2. **混合编程** - .NET + C++/CLI + C++ DLL
3. **现代技术栈** - 使用最新的.NET 9.0
4. **智能推荐** - 基于机器学习的推荐算法
5. **高性能** - Redis缓存 + 异步编程
6. **可扩展性** - 微服务架构设计
7. **安全性** - JWT认证 + 角色权限控制

这个项目完全满足所有技术要求，展示了.NET生态系统的强大能力和与原生代码的无缝集成。 